{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/app.css?9430","webpack:///./src/app.css","webpack:///./node_modules/css-loader/dist/runtime/api.js","webpack:///./node_modules/style-loader/lib/addStyles.js","webpack:///./node_modules/style-loader/lib/urls.js","webpack:///./src/lib/canvasGameEngine.js","webpack:///./src/lib/Keys.js","webpack:///./src/lib/Vector.js","webpack:///./src/Particle.js","webpack:///./src/Explosion.js","webpack:///./src/Ship.js","webpack:///./src/ShipFrontLight.js","webpack:///./src/Cell.js","webpack:///./src/Maze.js","webpack:///./src/Portal.js","webpack:///./src/lib/Utils.js","webpack:///./src/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","content","options","hmr","transform","insertInto","undefined","locals","push","useSourceMap","list","toString","this","map","item","cssMapping","btoa","sourceMapping","sourceMap","unescape","encodeURIComponent","JSON","stringify","sourceURLs","sources","source","sourceRoot","concat","join","cssWithMappingToString","mediaQuery","alreadyImportedModules","length","id","fn","memo","stylesInDom","isOldIE","window","document","all","atob","apply","arguments","getElement","target","parent","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","e","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","styles","domStyle","refs","j","parts","addStyle","listToStyles","newStyles","base","part","css","media","insertStyleElement","style","Error","lastStyleElementInsertedAtTop","insertAt","nextSibling","insertBefore","appendChild","firstChild","before","removeStyleElement","parentNode","removeChild","idx","indexOf","splice","createStyleElement","createElement","attrs","type","nonce","nc","getNonce","addAttrs","el","keys","forEach","setAttribute","obj","update","remove","result","default","styleIndex","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","link","rel","createLinkElement","autoFixUrls","convertToAbsoluteUrls","blob","oldSrc","href","styleSheet","cssText","createTextNode","newObj","DEBUG","newList","mayRemove","textStore","replaceText","index","replacement","filter","Boolean","cssNode","childNodes","location","baseUrl","protocol","host","currentDir","pathname","replace","fullMatch","origUrl","newUrl","unquotedOrigUrl","trim","$1","test","canvasGameEngine","w","h","_classCallCheck","canvas","getElementById","width","height","ctx","getContext","title","setup","oldTime","requestAnimationFrame","_loop","time","elapsed","loop","Keys","canvasElement","debug","Keys_classCallCheck","keyDownActions","keyUpActions","addKeysListeners","mouseDownAction","mouseUpAction","addMouseListeners","addEventListener","onKeyDown","onKeyUp","keyCode","downFn","upFn","addKeyDownAction","addKeyUpAction","console","log","onMouseDown","Vector","x","y","Vector_classCallCheck","angle","Math","cos","sin","other","hypot","a","len","mag","mult","normalize","setMag","sqrt","atan2","Particle","initialSpeed","damping","size","color","Particle_classCallCheck","pos","initPos","vel","fromAngle","rota","random","PI","rotaOffset","add","fillStyle","save","translate","rotate","fillRect","restore","Explosion","speed","cb","Explosion_classCallCheck","particles","setTimeout","draw","Ship","radius","Ship_classCallCheck","initialPos","acceleration","shipAngleOffset","boost","explosion","offset","boostPower","enteringPortal","deltaTime","newAngle","constrain","max","movmentDir","portal","portalCb","portalPos","clone","subtract","frontLight","_drawShip","_drawBoost","beginPath","ellipse","fill","closePath","strokeStyle","lineWidth","stroke","moveTo","lineTo","ShipFrontLight","ShipFrontLight_classCallCheck","frontLightAngle","rays","points","rayLength","c2","ctx2","ship","maze","_this","vStart","vEnd","edges","edge","vX","vY","ray","v1","v2","minT1","Infinity","minV","eX","eY","abs","t2","t1","_points","p1","p2","sort","b","aAngle","bAngle","_this2","textAlign","textBaseline","fillText","makeRays","calculateRaysIntersection","_this3","xG1","yG1","gradient1","createLinearGradient","addColorStop","x1","y1","x2","y2","gradient2","globalCompositeOperation","drawImage","Cell","cellW","cellH","Cell_classCallCheck","walls","visited","_ship$pos","cellX","cellY","_drawWall","Maze","cols","rows","Maze_classCallCheck","grid","stack","longestStack","furthestCellCoords","cell","current","mazeDone","nextBuildStep","_addEdge","newEdges","isUnique","_e","_i","_this$current","neighbors","top","right","bottom","left","floor","next","checkNeighbors","removeWalls","pop","collides","Portal","isLastLevel","Portal_classCallCheck","innerRadius","strokeWidth","isColliding","distance","num","origMin","origMax","tgtMin","tgtMax","performance","now","gradient","createRadialGradient","OPTIONS","GAME_IS","level","gameState","nextGameState","newLevel","keyboard","addKeysAction","startTurning","stopTurning","startBoost","stopBoost","resetPos","addMouseDownAction","offsetX","offsetY","ceil","portalX","portalY","minCellDim","min","shipFrontLight","text","font","elapsedTime","collisionWithWall","arrived","explode","enterPortal","_writeText","start"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n","\nvar content = require(\"!!../node_modules/css-loader/dist/cjs.js!./app.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/css-loader/dist/cjs.js!./app.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/css-loader/dist/cjs.js!./app.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"body {\\r\\n  margin: 0;\\r\\n  padding: 0;\\r\\n}\\r\\n\\r\\ncanvas {\\r\\n  margin: 50px;\\r\\n}\\r\\n\", \"\"]);\n\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return '@media ' + item[2] + '{' + content + '}';\n      } else {\n        return content;\n      }\n    }).join('');\n  }; // import a list of modules into the list\n\n\n  list.i = function (modules, mediaQuery) {\n    if (typeof modules === 'string') {\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    for (var i = 0; i < this.length; i++) {\n      var id = this[i][0];\n\n      if (id != null) {\n        alreadyImportedModules[id] = true;\n      }\n    }\n\n    for (i = 0; i < modules.length; i++) {\n      var item = modules[i]; // skip already imported module\n      // this implementation is not 100% perfect for weird media query combinations\n      // when a module is imported multiple times with different media queries.\n      // I hope this will never occur (Hey this way we have smaller bundles)\n\n      if (item[0] == null || !alreadyImportedModules[item[0]]) {\n        if (mediaQuery && !item[2]) {\n          item[2] = mediaQuery;\n        } else if (mediaQuery) {\n          item[2] = '(' + item[2] + ') and (' + mediaQuery + ')';\n        }\n\n        list.push(item);\n      }\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || '';\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */';\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n  return '/*# ' + data + ' */';\n}","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target, parent) {\n  if (parent){\n    return parent.querySelector(target);\n  }\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target, parent) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target, parent);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertAt.before, target);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\tif(options.attrs.nonce === undefined) {\n\t\tvar nonce = getNonce();\n\t\tif (nonce) {\n\t\t\toptions.attrs.nonce = nonce;\n\t\t}\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction getNonce() {\n\tif (typeof __webpack_nonce__ === 'undefined') {\n\t\treturn null;\n\t}\n\n\treturn __webpack_nonce__;\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = typeof options.transform === 'function'\n\t\t ? options.transform(obj.css) \n\t\t : options.transform.default(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","export default class canvasGameEngine {\r\n  constructor (id, name, w, h) {\r\n    this.name = name\r\n    this.canvas = document.getElementById(id)\r\n\r\n    this.canvas.width = w\r\n    this.canvas.height = h\r\n\r\n    this.w = w\r\n    this.h = h\r\n\r\n    this.ctx = this.canvas.getContext('2d')\r\n\r\n    window.document.title = name\r\n    this.setup()\r\n\r\n    this.oldTime = 0\r\n  }\r\n\r\n  start () {\r\n    requestAnimationFrame(this._loop.bind(this))\r\n  }\r\n\r\n  setup () {\r\n  }\r\n\r\n  _loop (time) {\r\n    const elapsed = time - this.oldTime\r\n    this.loop(elapsed)\r\n\r\n    this.oldTime = time\r\n    requestAnimationFrame(this._loop.bind(this))\r\n  }\r\n\r\n  loop (time) {\r\n    // do nothing, will be overwritten\r\n  }\r\n}\r\n","export default class Keys {\r\n  constructor (canvasElement, debug) {\r\n    this.debug = debug\r\n    this.keyDownActions = {}\r\n    this.keyUpActions = {}\r\n    this.addKeysListeners()\r\n\r\n    this.mouseDownAction = null\r\n    this.mouseUpAction = null\r\n    this.addMouseListeners(canvasElement)\r\n  }\r\n\r\n  addKeysListeners () {\r\n    window.addEventListener('keydown', this.onKeyDown.bind(this))\r\n    window.addEventListener('keyup', this.onKeyUp.bind(this))\r\n  }\r\n\r\n  addKeyDownAction (keyCode, fn) {\r\n    this.keyDownActions[keyCode] = fn\r\n  }\r\n\r\n  addKeyUpAction (keyCode, fn) {\r\n    this.keyUpActions[keyCode] = fn\r\n  }\r\n\r\n  addKeysAction (keyCode, downFn, upFn) {\r\n    this.addKeyDownAction(keyCode, downFn)\r\n    this.addKeyUpAction(keyCode, upFn)\r\n  }\r\n\r\n  onKeyDown (e) {\r\n    if (this.debug) console.log('KEYDOWN', e.keyCode)\r\n    if (this.keyDownActions[e.keyCode] !== undefined) {\r\n      this.keyDownActions[e.keyCode]()\r\n    }\r\n  }\r\n\r\n  onKeyUp (e) {\r\n    if (this.keyUpActions[e.keyCode] !== undefined) {\r\n      this.keyUpActions[e.keyCode]()\r\n    }\r\n  }\r\n\r\n  addMouseListeners (canvasElement) {\r\n    canvasElement.addEventListener('mousedown', this.onMouseDown.bind(this))\r\n    // canvasElement.addEventListener('mouseup', this.onMouseUp.bind(this))\r\n  }\r\n\r\n  addMouseDownAction (fn) {\r\n    this.mouseDownAction = fn\r\n  }\r\n\r\n  onMouseDown (e) {\r\n    if (this.mouseDownAction) {\r\n      this.mouseDownAction(e)\r\n    }\r\n  }\r\n}\r\n","export default class Vector {\r\n  constructor (x = 0, y = 0) {\r\n    this.x = x\r\n    this.y = y\r\n  }\r\n\r\n  static fromAngle (angle, length = 1) {\r\n    return new Vector(length * Math.cos(angle), length * Math.sin(angle))\r\n  }\r\n\r\n  clone () {\r\n    return new Vector(this.x, this.y)\r\n  }\r\n\r\n  get mag () {\r\n    return Math.sqrt(this.x * this.x + this.y * this.y)\r\n  }\r\n  get angle () {\r\n    // between -PI & +PI\r\n    return Math.atan2(this.y, this.x)\r\n  }\r\n\r\n  distance (other) {\r\n    return Math.hypot(other.x - this.x, other.y - this.y)\r\n  }\r\n\r\n  add (other) {\r\n    this.x = this.x + other.x\r\n    this.y = this.y + other.y\r\n    return this\r\n  }\r\n  subtract (other) {\r\n    this.x = this.x - other.x\r\n    this.y = this.y - other.y\r\n    return this\r\n  }\r\n  mult (a) {\r\n    this.x = this.x * a\r\n    this.y = this.y * a\r\n    return this\r\n  }\r\n\r\n  normalize () {\r\n    var len = this.mag\r\n    if (len !== 0) this.mult(1 / len)\r\n    return this\r\n  }\r\n\r\n  setMag (mag) {\r\n    this.normalize().mult(mag)\r\n    return this\r\n  }\r\n\r\n  constrain (mag) {\r\n    if (this.mag > mag) {\r\n      this.setMag(mag)\r\n    }\r\n    return this\r\n  }\r\n}\r\n","import Vector from './lib/Vector'\r\n\r\nexport default class Particle {\r\n  constructor (x, y, angle, initialSpeed, damping, size, color) {\r\n    this.pos = new Vector(x, y)\r\n    this.initPos = new Vector(x, y)\r\n\r\n    this.vel = Vector.fromAngle(angle, initialSpeed)\r\n    // console.log('this.vel', this.vel)\r\n    this.damping = damping\r\n\r\n    this.size = size\r\n    this.color = color\r\n\r\n    this.rota = Math.random() * 2 * Math.PI\r\n    this.rotaOffset = (Math.random() - 0.5) / 5\r\n  }\r\n\r\n  update () {\r\n    this.pos.add(this.vel)\r\n    this.vel.mult(this.damping)\r\n    this.rota += this.rotaOffset\r\n  }\r\n\r\n  draw (ctx) {\r\n    ctx.fillStyle = this.color\r\n    ctx.save()\r\n    ctx.translate(this.pos.x, this.pos.y)\r\n    ctx.rotate(this.rota)\r\n    ctx.fillRect(-this.size / 2, -this.size, this.size, this.size * 2)\r\n    ctx.restore()\r\n  }\r\n}\r\n","import Particle from './Particle'\r\n\r\n// starts a particle system in the shape of an explosion\r\nexport default class Explosion {\r\n  constructor (x, y, angle, speed, size, cb) {\r\n    this.particles = []\r\n    for (let i = 0; i < 10; i++) {\r\n      const a = angle + ((Math.random() - 0.5))\r\n      const s = speed + (Math.random() - 0.5)\r\n      const damping = 0.95\r\n      const color = i === 0 ? '#0FF' : '#999'\r\n      this.particles[i] = new Particle(x, y, a, s, damping, size / 2, color)\r\n    }\r\n\r\n    setTimeout(cb, 500)\r\n  }\r\n\r\n  draw (ctx) {\r\n    for (let i = 0; i < this.particles.length; i++) {\r\n      const p = this.particles[i]\r\n      p.update()\r\n      p.draw(ctx)\r\n    }\r\n  }\r\n}\r\n","import Vector from './lib/Vector'\r\nimport Explosion from './Explosion'\r\n\r\nexport default class Ship {\r\n  constructor (x, y, radius) {\r\n    this.r = radius\r\n\r\n    this.initialPos = new Vector(x, y)\r\n    this.acceleration = new Vector(0, 0)\r\n    this.pos = new Vector(x, y)\r\n    this.vel = new Vector(0, 0)\r\n\r\n    this.angle = 0\r\n    this.shipAngleOffset = 0\r\n\r\n    this.boost = 0\r\n\r\n    this.explosion = null\r\n  }\r\n\r\n  startTurning (offset) { this.shipAngleOffset = offset }\r\n  stopTurning () { this.shipAngleOffset = 0 }\r\n  startBoost (boostPower) { this.boost = boostPower }\r\n  stopBoost () { this.boost = 0 }\r\n\r\n  resetPos (x = this.initialPos.x, y = this.initialPos.y) {\r\n    // if (!this.explosion) return // no reset of the ship while it's not exploding\r\n\r\n    this.explosion = null\r\n    this.pos = new Vector(x, y)\r\n    this.vel = new Vector(0, 0)\r\n    this.angle = 0\r\n    this.shipAngleOffset = 0\r\n\r\n    this.boost = 0\r\n    this.enteringPortal = false\r\n\r\n    this.acceleration = new Vector(0, 0)\r\n  }\r\n\r\n  update (deltaTime) {\r\n    if (this.explosion) return\r\n\r\n    // update operation\r\n    // this.pos = position du vaisseau\r\n    // acceleration : ajouté à la vélocité, doit etre proportionnel à deltatime\r\n    // this.vel: vitesse\r\n    //    * ajouté à chaque frame (si framerate 60, doit etre 3x inf à framerate 20 ...)\r\n    //    * constraint à une vitesse max, si framerate\r\n    //\r\n    const newAngle = this.angle + this.shipAngleOffset * 0.001 * deltaTime\r\n    this.angle = newAngle\r\n    // angle constrained between -PI and +PI\r\n    if (this.angle < -Math.PI) this.angle += Math.PI * 2\r\n    if (this.angle > Math.PI) this.angle -= Math.PI * 2\r\n\r\n    if (this.boost > 0 && !this.enteringPortal) {\r\n      this.acceleration = Vector.fromAngle(this.angle, this.boost * 0.001 * deltaTime)\r\n    } else {\r\n      this.acceleration = new Vector(0, 0)\r\n    }\r\n    this.vel.add(this.acceleration)\r\n    this.vel.constrain(0.25 * deltaTime)\r\n    this.pos.add(this.vel)\r\n\r\n    if (this.enteringPortal) {\r\n      this.r -= 0.1\r\n      this.r = Math.max(this.r, 0.1)\r\n    }\r\n  }\r\n\r\n  edges (w, h) {\r\n    if (this.pos.x > w + this.r) this.pos.x = 0\r\n    if (this.pos.y > h + this.r) this.pos.y = 0\r\n    if (this.pos.x < -this.r) this.pos.x = w + this.r\r\n    if (this.pos.y < -this.r + this.r) this.pos.y = h + this.r\r\n\r\n    return false\r\n  }\r\n\r\n  explode (cb) {\r\n    if (!this.explosion) {\r\n      const movmentDir = this.vel.angle\r\n\r\n      const speed = this.vel.mag\r\n      this.explosion = new Explosion(this.pos.x, this.pos.y, movmentDir, speed, this.r, cb)\r\n    }\r\n  }\r\n\r\n  enterPortal (portal, cb) {\r\n    if (this.enteringPortal) return\r\n\r\n    this.enteringPortal = true\r\n    this.portalCb = cb\r\n    this.portalPos = portal.pos\r\n\r\n    const p = this.pos.clone()\r\n    p.subtract(portal.pos)\r\n    p.mult(-1)\r\n    p.setMag(1)\r\n    this.vel = p\r\n\r\n    setTimeout(cb, 500)\r\n  }\r\n\r\n  draw (ctx, frontLight) {\r\n    if (this.explosion) {\r\n      this.explosion.draw(ctx)\r\n    } else {\r\n      frontLight.draw(ctx, this)\r\n      this._drawShip(ctx)\r\n      this._drawBoost(ctx)\r\n    }\r\n  }\r\n\r\n  _drawShip (ctx) {\r\n    ctx.save()\r\n    ctx.fillStyle = '#999'\r\n    ctx.translate(this.pos.x, this.pos.y)\r\n    ctx.rotate(this.angle)\r\n    ctx.beginPath()\r\n    ctx.ellipse(0, 0, this.r, this.r, 0, 0, Math.PI * 2)\r\n    ctx.fill()\r\n    ctx.closePath()\r\n\r\n    ctx.beginPath()\r\n    ctx.strokeStyle = '#0FF'\r\n    ctx.lineWidth = this.r / 4\r\n    const r = this.r * 0.5\r\n    ctx.ellipse(0, 0, r, r, 0, -Math.PI / 4, Math.PI / 4)\r\n\r\n    ctx.stroke()\r\n    ctx.closePath()\r\n    ctx.restore()\r\n  }\r\n\r\n  _drawBoost (ctx) { //, x, y, scale, color) {\r\n    if (this.boost === 0) return\r\n    const scale = 2\r\n    ctx.save()\r\n    ctx.translate(this.pos.x, this.pos.y)\r\n    ctx.rotate(this.angle)\r\n    ctx.fillStyle = '#ff860d'\r\n    ctx.beginPath()\r\n    ctx.moveTo(-this.r, -this.r / 4 * scale)\r\n    ctx.lineTo(-this.r - this.r / 1.5 * scale, 0)\r\n    ctx.lineTo(-this.r, this.r / 4 * scale)\r\n    ctx.closePath()\r\n    ctx.fill()\r\n    ctx.restore()\r\n  }\r\n}\r\n","import Vector from './lib/Vector'\r\n\r\nexport default class ShipFrontLight {\r\n  constructor (w, h) {\r\n    this.frontLightAngle = Math.PI / 6 // that is half the angle actually\r\n    this.rays = []\r\n    this.points = []\r\n    this.rayLength = 1000\r\n\r\n    this.w = w\r\n    this.h = h\r\n\r\n    this.c2 = document.createElement('canvas')\r\n    this.ctx2 = this.c2.getContext('2d')\r\n  }\r\n\r\n  makeRays (ship, maze) {\r\n    // empty this.rays\r\n    const rays = []\r\n\r\n    // adding a ray for left and right of light beam\r\n    const vStart = Vector.fromAngle(ship.angle - this.frontLightAngle, this.rayLength)\r\n    const vEnd = Vector.fromAngle(ship.angle + this.frontLightAngle, this.rayLength)\r\n    rays.push(vStart)\r\n    rays.push(vEnd)\r\n\r\n    maze.edges.forEach(edge => {\r\n      // create some rays, from ship to start of edge & ship to end of edge\r\n      for (let i = 0; i < 2; i++) {\r\n        // i==0 ==> ray towards start of edge\r\n        // i==1 ==> ray towards end of edge\r\n        const vX = edge[i].x - ship.pos.x\r\n        const vY = edge[i].y - ship.pos.y\r\n        const ray = new Vector(vX, vY)\r\n\r\n        // we only add a ray if it's inside the lightbeam\r\n        let a = ray.angle\r\n        if (ship.angle < 0 && (a > Math.PI / 2)) {\r\n          a -= 2 * Math.PI\r\n        } else if (ship.angle > 0 && (a < -Math.PI / 2)) {\r\n          a += 2 * Math.PI\r\n        }\r\n        if (a >= ship.angle - this.frontLightAngle && a <= ship.angle + this.frontLightAngle) {\r\n          ray.setMag(this.rayLength)\r\n          rays.push(ray)\r\n          // create 2 other vectors just before & after this one\r\n          const v1 = Vector.fromAngle(ray.angle - 0.0001, this.rayLength)\r\n          const v2 = Vector.fromAngle(ray.angle + 0.0001, this.rayLength)\r\n          rays.push(v1)\r\n          rays.push(v2)\r\n        }\r\n      }\r\n    })\r\n\r\n    return rays\r\n  }\r\n\r\n  calculateRaysIntersection (ship, maze) {\r\n    let points = []\r\n\r\n    this.rays.forEach(ray => {\r\n      let minT1 = Infinity\r\n      let minV = null\r\n\r\n      maze.edges.forEach(e => {\r\n      // edge coordinates\r\n        const eX = e[1].x - e[0].x\r\n        const eY = e[1].y - e[0].y\r\n        // test if ray and edges are not aligned\r\n        if (Math.abs(eX - ray.x) > 0 && Math.abs(eY - ray.y) > 0) {\r\n        // t2 is normalized distance from edge start to intersection point\r\n          const t2 = (ray.x * (e[0].y - ship.pos.y) + (ray.y * (ship.pos.x - e[0].x))) / (eX * ray.y - eY * ray.x)\r\n          // t1 is normalised distance from ship to line intersection point\r\n          const t1 = (e[0].x + eX * t2 - ship.pos.x) / ray.x\r\n          // if intersect point exists along ray, and along line segment then intersect point is valid\r\n          if (t1 > 0 && t2 >= 0 && t2 <= 1) {\r\n          // keep only the closest intersection from the ship\r\n            if (t1 < minT1) {\r\n              minT1 = t1\r\n              minV = new Vector(ray.x * t1, ray.y * t1)\r\n            }\r\n          }\r\n        }\r\n      })\r\n      if (minV) points.push(minV)\r\n    })\r\n\r\n    // filter the intersection points to remove similar points\r\n    const _points = []\r\n    const limit = 3 // points get removed if 3px close\r\n    for (let i = 0; i < points.length - 1; i++) {\r\n      const p1 = points[i]\r\n      const p2 = points[i + 1]\r\n      const similar = Math.abs(p1.x - p2.x) < limit && Math.abs(p1.y - p2.y) < limit\r\n      if (!similar) {\r\n        _points.push(p1)\r\n      }\r\n    }\r\n    // don't forget last point\r\n    _points.push(points[points.length - 1])\r\n\r\n    points = _points\r\n\r\n    // sorting points by their angle, careful, ship orientation matters\r\n    points = points.sort(function (a, b) {\r\n      let aAngle = a.angle\r\n      let bAngle = b.angle\r\n\r\n      if (ship.angle < -Math.PI / 2 || ship.angle > Math.PI / 2) {\r\n        if (aAngle < 0) aAngle += 2 * Math.PI\r\n        if (bAngle < 0) bAngle += 2 * Math.PI\r\n      }\r\n\r\n      if (aAngle < bAngle) return -1\r\n      if (aAngle > bAngle) return 1\r\n\r\n      return 0\r\n    })\r\n\r\n    return points\r\n  }\r\n\r\n  drawRays (ctx, ship) {\r\n    const length = 1000\r\n    ctx.lineWidth = 1\r\n\r\n    this.rays.forEach((ray, index) => {\r\n      ctx.beginPath()\r\n      ctx.strokeStyle = '#F00'\r\n\r\n      let a = ray.angle\r\n      if (ship.angle < 0) {\r\n        if (a > Math.PI / 2) a -= 2 * Math.PI\r\n      }\r\n      if (ship.angle > 0) {\r\n        if (a < -Math.PI / 2) a += 2 * Math.PI\r\n      }\r\n\r\n      if (a >= ship.angle - this.frontLightAngle && a <= ship.angle + this.frontLightAngle) {\r\n        ctx.strokeStyle = '#0F0'\r\n      }\r\n\r\n      ctx.moveTo(ship.pos.x, ship.pos.y)\r\n      ctx.lineTo(ship.pos.x + ray.x, ship.pos.y + ray.y)\r\n      ctx.stroke()\r\n\r\n      const pos = ray.clone()\r\n      pos.setMag(60)\r\n      pos.add(ship.pos)\r\n\r\n      ctx.fillStyle = '#FF0'\r\n      ctx.beginPath()\r\n      ctx.ellipse(pos.x, pos.y, 10, 10, 0, 0, Math.PI * 2)\r\n      ctx.fill()\r\n\r\n      ctx.fillStyle = '#00F'\r\n      ctx.textAlign = 'center'\r\n      ctx.textBaseline = 'middle'\r\n      ctx.fillText(index, pos.x, pos.y)\r\n    })\r\n\r\n    this.points.forEach((p, index) => {\r\n      const pos = p.clone()\r\n      pos.setMag(pos.mag * 0.9)\r\n\r\n      const x = (pos.x + ship.pos.x)\r\n      const y = (pos.y + ship.pos.y)\r\n      ctx.fillStyle = '#000'\r\n      ctx.beginPath()\r\n      ctx.ellipse(x, y, 6, 6, 0, 0, Math.PI * 2)\r\n      ctx.fill()\r\n\r\n      ctx.fillStyle = '#FFF'\r\n      ctx.textAlign = 'center'\r\n      ctx.textBaseline = 'middle'\r\n      ctx.fillText(index, x, y)\r\n    })\r\n\r\n    // dessiner les bords du beam\r\n    ctx.beginPath()\r\n    ctx.strokeStyle = 'rgba(255, 255, 0, 1)'\r\n    ctx.lineWidth = 2\r\n    ctx.moveTo(ship.pos.x, ship.pos.y) // centre\r\n    let x = ship.pos.x + Math.cos(ship.angle - this.frontLightAngle) * length\r\n    let y = ship.pos.y + Math.sin(ship.angle - this.frontLightAngle) * length\r\n    ctx.lineTo(x, y)\r\n    ctx.closePath()\r\n    ctx.stroke()\r\n\r\n    ctx.beginPath()\r\n    ctx.strokeStyle = 'rgba(255, 255, 0, 1)'\r\n    ctx.lineWidth = 2\r\n    ctx.moveTo(ship.pos.x, ship.pos.y) // centre\r\n    x = ship.pos.x + Math.cos(ship.angle + this.frontLightAngle) * length\r\n    y = ship.pos.y + Math.sin(ship.angle + this.frontLightAngle) * length\r\n    ctx.lineTo(x, y)\r\n    ctx.closePath()\r\n    ctx.stroke()\r\n  }\r\n\r\n  update (ship, maze) {\r\n    // 1 - send rays inside the front lightbeam\r\n    this.rays = this.makeRays(ship, maze)\r\n    // 2 - cut rays if they intersect with a wall\r\n    this.points = this.calculateRaysIntersection(ship, maze)\r\n  }\r\n\r\n  draw (ctx, ship) {\r\n    // 3 - draw the polygon defined in this.points\r\n    // we want 2 gradients : one from ship and fade in distance\r\n    // another one brighter in the center and fading on left & right\r\n    // we use another canvas to deal with blendingmodes and draw it on the original canvas\r\n\r\n    // 3.1 - make gradients\r\n    const xG1 = ship.pos.x + Math.cos(ship.angle) * 300\r\n    const yG1 = ship.pos.y + Math.sin(ship.angle) * 300\r\n    const gradient1 = ctx.createLinearGradient(ship.pos.x, ship.pos.y, xG1, yG1)\r\n    gradient1.addColorStop(0, 'rgba(255, 255, 255, .5)')\r\n    gradient1.addColorStop(1, 'rgba(255, 255, 255, 0.0)')\r\n\r\n    const x1 = ship.pos.x + Math.cos(ship.angle - this.frontLightAngle) * 150\r\n    const y1 = ship.pos.y + Math.sin(ship.angle - this.frontLightAngle) * 150\r\n    const x2 = ship.pos.x + Math.cos(ship.angle + this.frontLightAngle) * 150\r\n    const y2 = ship.pos.y + Math.sin(ship.angle + this.frontLightAngle) * 150\r\n    const gradient2 = ctx.createLinearGradient(x1, y1, x2, y2)\r\n    gradient2.addColorStop(0, 'rgba(255, 255, 255, 0)')\r\n    gradient2.addColorStop(0.5, 'rgba(255, 255, 255, 1)')\r\n    gradient2.addColorStop(1, 'rgba(255, 255, 255, 0)')\r\n\r\n    // 3.2 make 2 polygons with different gradients and multiply them using compositing mode\r\n    // draw on canvas2\r\n    if (this.points.length > 0) {\r\n      // this clears previous content & previous compositing mode\r\n      this.c2.width = this.w\r\n      this.c2.height = this.h\r\n\r\n      this.ctx2.beginPath()\r\n      this.ctx2.fillStyle = gradient1\r\n      this.ctx2.moveTo(ship.pos.x, ship.pos.y) // centre\r\n      this.points.forEach(p => {\r\n        this.ctx2.lineTo(ship.pos.x + p.x, ship.pos.y + p.y)\r\n      })\r\n      this.ctx2.closePath()\r\n      this.ctx2.fill()\r\n\r\n      // multiply the 2 gradients\r\n      this.ctx2.globalCompositeOperation = 'source-in'\r\n\r\n      this.ctx2.beginPath()\r\n      this.ctx2.fillStyle = gradient2\r\n      this.ctx2.moveTo(ship.pos.x, ship.pos.y) // centre\r\n      this.points.forEach(p => {\r\n        this.ctx2.lineTo(ship.pos.x + p.x, ship.pos.y + p.y)\r\n      })\r\n      this.ctx2.closePath()\r\n      this.ctx2.fill()\r\n    }\r\n\r\n    // draw canvas 2 onto original canvas\r\n    ctx.drawImage(this.c2, 0, 0)\r\n\r\n    // this.drawRays(ctx, ship) // debug\r\n  }\r\n}\r\n","export default class Cell {\r\n  constructor (i, j, cellW, cellH, index) {\r\n    this.i = i\r\n    this.j = j\r\n    this.cellW = cellW\r\n    this.cellH = cellH\r\n\r\n    this.index = index\r\n\r\n    this.walls = {\r\n      n: true,\r\n      e: true,\r\n      s: true,\r\n      w: true\r\n    }\r\n    this.visited = false\r\n  }\r\n\r\n  collides (ship) {\r\n    const { x, y } = ship.pos\r\n    const r = ship.r\r\n    const cellX = this.i * this.cellW\r\n    const cellY = this.j * this.cellH\r\n\r\n    const shipInCell = (x + r > cellX && x - r < cellX + this.cellW) && (y + r > cellY && y - r < cellY + this.cellH)\r\n    if (!shipInCell) return false\r\n\r\n    return (\r\n      (this.walls.e && x + r > cellX + this.cellW) ||\r\n      (this.walls.w && x - r < cellX) ||\r\n      (this.walls.s && y + r > cellY + this.cellH) ||\r\n      (this.walls.n && y - r < cellY)\r\n    )\r\n  }\r\n\r\n  draw (ctx) {\r\n    const x = this.i * this.cellW\r\n    const y = this.j * this.cellH\r\n\r\n    // ctx.strokeStyle = 'rgba(0, 255, 0, 0.2)'\r\n    // ctx.lineWidth = 1\r\n    // ctx.strokeRect(x, y, this.cellW, this.cellH)\r\n\r\n    ctx.strokeStyle = '#FFF'\r\n    ctx.lineWidth = 2\r\n    if (this.walls.n) {\r\n      this._drawWall(ctx, x, y, x + this.cellW, y)\r\n    }\r\n    if (this.walls.e) {\r\n      this._drawWall(ctx, x + this.cellW, y, x + this.cellW, y + this.cellH)\r\n    }\r\n    if (this.walls.s) {\r\n      this._drawWall(ctx, x + this.cellW, y + this.cellH, x, y + this.cellH)\r\n    }\r\n    if (this.walls.w) {\r\n      this._drawWall(ctx, x, y + this.cellH, x, y)\r\n    }\r\n    // ctx.fillStyle = '#FFF'\r\n    // ctx.fillText(this.index, x + this.cellW / 2, y + this.cellH / 2)\r\n\r\n    // if (this.visited) {\r\n    //   ctx.fillStyle = 'rgba(255, 0, 255, 100)'\r\n    //   ctx.fillRect(x, y, this.size, this.size)\r\n    // }\r\n  }\r\n\r\n  _drawWall (ctx, a, b, c, d) {\r\n    ctx.beginPath()\r\n    ctx.moveTo(a, b)\r\n    ctx.lineTo(c, d)\r\n    ctx.stroke()\r\n    ctx.closePath()\r\n  }\r\n}\r\n","import Cell from './Cell.js'\r\nimport Vector from './lib/Vector'\r\n\r\nexport default class Maze {\r\n  constructor (cols, rows, cellW, cellH) {\r\n    this.cols = cols\r\n    this.rows = rows\r\n    this.cellW = cellW\r\n    this.cellH = cellH\r\n\r\n    this.grid = []\r\n    this.stack = []\r\n\r\n    this.longestStack = 0\r\n    this.furthestCellCoords = null\r\n\r\n    let index = 0\r\n    for (var j = 0; j < rows; j++) {\r\n      for (var i = 0; i < cols; i++) {\r\n        var cell = new Cell(i, j, cellW, cellH, index)\r\n        this.grid.push(cell)\r\n        index++\r\n      }\r\n    }\r\n\r\n    this.current = this.grid[0]\r\n    let mazeDone = false\r\n    while (!mazeDone) {\r\n      mazeDone = this.nextBuildStep()\r\n    }\r\n\r\n    console.log(this.grid)\r\n\r\n    // ici recuperer les edges des cellules\r\n    // TODO : merge edges !!! (east wall & west wall of 2 adjacent cells)\r\n    this.edges = []\r\n    this.grid.forEach(cell => {\r\n      if (cell.walls.n) this._addEdge(cell, 0, 0, 1, 0)\r\n      if (cell.walls.s) this._addEdge(cell, 0, 1, 1, 1)\r\n      if (cell.walls.w) this._addEdge(cell, 0, 0, 0, 1)\r\n      if (cell.walls.e) this._addEdge(cell, 1, 0, 1, 1)\r\n    })\r\n\r\n    // remove doubles\r\n    const newEdges = this.edges.filter((edge, index) => {\r\n      let isUnique = true\r\n      this.edges.forEach((_e, _i) => {\r\n        if (index < _i) {\r\n          if (\r\n            edge[0].x === _e[0].x &&\r\n            edge[0].y === _e[0].y &&\r\n            edge[1].y === _e[1].y &&\r\n            edge[1].y === _e[1].y\r\n          ) {\r\n            isUnique = false\r\n          }\r\n        }\r\n      })\r\n      return isUnique\r\n    })\r\n    this.edges = newEdges\r\n  }\r\n\r\n  _addEdge (cell, a, b, c, d) {\r\n    const x1 = cell.i + a\r\n    const y1 = cell.j + b\r\n    const x2 = cell.i + c\r\n    const y2 = cell.j + d\r\n\r\n    this.edges.push([\r\n      new Vector(x1 * this.cellW, y1 * this.cellH),\r\n      new Vector(x2 * this.cellW, y2 * this.cellH)\r\n    ])\r\n  }\r\n\r\n  checkNeighbors () {\r\n    const { i, j } = this.current\r\n    const neighbors = []\r\n\r\n    const top = this.grid[this.index(i, j - 1)]\r\n    const right = this.grid[this.index(i + 1, j)]\r\n    const bottom = this.grid[this.index(i, j + 1)]\r\n    const left = this.grid[this.index(i - 1, j)]\r\n\r\n    if (top && !top.visited) {\r\n      neighbors.push(top)\r\n    }\r\n    if (right && !right.visited) {\r\n      neighbors.push(right)\r\n    }\r\n    if (bottom && !bottom.visited) {\r\n      neighbors.push(bottom)\r\n    }\r\n    if (left && !left.visited) {\r\n      neighbors.push(left)\r\n    }\r\n\r\n    if (neighbors.length > 0) {\r\n      const r = Math.floor(Math.random() * neighbors.length)\r\n      return neighbors[r]\r\n    } else {\r\n      return undefined\r\n    }\r\n  }\r\n\r\n  index (i, j) {\r\n    if (i < 0 || j < 0 || i > this.cols - 1 || j > this.rows - 1) {\r\n      return -1\r\n    }\r\n    return i + j * this.cols\r\n  }\r\n\r\n  removeWalls (a, b) {\r\n    var x = a.i - b.i\r\n    if (x === 1) {\r\n      a.walls.w = false\r\n      b.walls.e = false\r\n    } else if (x === -1) {\r\n      a.walls.e = false\r\n      b.walls.w = false\r\n    }\r\n    var y = a.j - b.j\r\n    if (y === 1) {\r\n      a.walls.n = false\r\n      b.walls.s = false\r\n    } else if (y === -1) {\r\n      a.walls.s = false\r\n      b.walls.n = false\r\n    }\r\n  }\r\n\r\n  nextBuildStep () {\r\n    this.current.visited = true\r\n\r\n    // STEP 1\r\n    var next = this.checkNeighbors(this.current.i, this.current.j)\r\n    if (next) {\r\n      next.visited = true\r\n      // STEP 2\r\n      this.stack.push(this.current)\r\n\r\n      // STEP 3\r\n      this.removeWalls(this.current, next)\r\n      // STEP 4\r\n      this.current = next\r\n    } else if (this.stack.length > 0) {\r\n      if (this.stack.length > this.longestStack) {\r\n        this.longestStack = this.stack.length\r\n        this.furthestCellCoords = { i: this.current.i, j: this.current.j }\r\n      }\r\n      this.current = this.stack.pop()\r\n    }\r\n\r\n    return this.stack.length === 0\r\n  }\r\n\r\n  collides (ship) {\r\n    for (let i = 0; i < this.grid.length; i++) {\r\n      const collision = this.grid[i].collides(ship)\r\n      if (collision) {\r\n        return true\r\n      }\r\n    }\r\n    return false\r\n  }\r\n\r\n  draw (ctx) {\r\n    for (let i = 0; i < this.grid.length; i++) {\r\n      this.grid[i].draw(ctx)\r\n    }\r\n  }\r\n\r\n  _drawEdges (ctx) {\r\n    // dessin des edges (debug)\r\n    this.edges.forEach(edge => {\r\n      ctx.beginPath()\r\n      ctx.fillStyle = '#F00'\r\n      ctx.ellipse(edge[0].x, edge[0].y, 5, 5, 0, 0, Math.PI * 2)\r\n      ctx.fill()\r\n      ctx.beginPath()\r\n      ctx.fillStyle = '#00F'\r\n      ctx.ellipse(edge[1].x, edge[1].y, 5, 5, 0, 0, Math.PI * 2)\r\n      ctx.fill()\r\n\r\n      ctx.beginPath()\r\n      ctx.strokeStyle = '#0F0'\r\n      ctx.lineWidth = 2\r\n\r\n      ctx.moveTo(edge[0].x, edge[0].y)\r\n      ctx.lineTo(edge[1].x, edge[1].y)\r\n      ctx.stroke()\r\n    })\r\n  }\r\n}\r\n\r\n","import Vector from './lib/Vector'\r\nimport { map } from './lib/Utils'\r\n\r\nexport default class Portal {\r\n  constructor (x, y, radius, isLastLevel) {\r\n    this.pos = new Vector(x, y)\r\n\r\n    this.innerRadius = radius * 0.7\r\n    this.strokeWidth = radius - this.innerRadius\r\n    this.r = this.innerRadius + (this.strokeWidth / 2)\r\n\r\n    this.angle = 0\r\n    this.isColliding = false\r\n    this.isLastLevel = isLastLevel\r\n  }\r\n\r\n  collides (ship) {\r\n    const collides = (this.pos.distance(ship.pos) < this.innerRadius + ship.r)\r\n    if (collides) {\r\n      this.isColliding = ship.pos\r\n    } else {\r\n      this.isColliding = false\r\n    }\r\n    return collides\r\n  }\r\n\r\n  draw (ctx) {\r\n    ctx.strokeStyle = '#aaa'\r\n    ctx.lineWidth = this.strokeWidth\r\n\r\n    ctx.save()\r\n    ctx.translate(this.pos.x, this.pos.y)\r\n\r\n    const r = map(Math.sin(performance.now() / 500), -1, 1, 2, this.r - this.r / 2)\r\n    const gradient = ctx.createRadialGradient(0, 0, r, 0, 0, this.r)\r\n    gradient.addColorStop(0, this.isLastLevel ? '#ed7a7d' : '#a9f3fa')\r\n    gradient.addColorStop(1, this.isLastLevel ? '#bb2027' : '#0aaba7')\r\n    ctx.fillStyle = gradient\r\n\r\n    ctx.beginPath()\r\n    ctx.ellipse(0, 0, this.r, this.r, 0, 0, Math.PI * 2)\r\n    ctx.fill()\r\n    ctx.stroke()\r\n\r\n    ctx.restore()\r\n  }\r\n}\r\n","export function map (num, origMin, origMax, tgtMin, tgtMax) {\r\n  return (num - origMin) * (tgtMax - tgtMin) / (origMax - origMin) + tgtMin\r\n}\r\nexport function round (num, precision = 0) {\r\n  const mult = Math.pow(10, precision)\r\n\r\n  return Math.round(num * mult) / mult\r\n}\r\n\r\n","// TODO\r\n// dont use setTimeout for anims\r\n// stats between levels (time, nb of tries...)\r\n// procedural backgrounds or walls (nebulae, clouds, stars  ...)\r\n// => perlin noise seems to be the thing\r\n// procedural sounds\r\n// procedural light in front of the ship, cf https://www.youtube.com/watch?v=fc3nnG2CG8U\r\n\r\n// careful : rotating movement shouldn't stop, it's space !!!\r\n\r\nimport './app.css'\r\n\r\nimport canvasGameEngine from './lib/canvasGameEngine'\r\nimport Keys from './lib/Keys'\r\n\r\nimport Ship from './Ship'\r\nimport ShipFrontLight from './ShipFrontLight'\r\nimport Maze from './Maze'\r\nimport Portal from './Portal'\r\nimport Vector from './lib/Vector'\r\n\r\nconst OPTIONS = {\r\n  shipAngleOffset: 8, // speed of turning\r\n  shipBoostPower: 10, // the lower the harder\r\n  debug: false,\r\n  wallCollision: true,\r\n  portalCollision: true,\r\n  lastLevel: 8 // level x will be the last one\r\n}\r\n\r\nconst GAME_IS = {\r\n  UNSTARTED: 0,\r\n  RUNNING: 1,\r\n  PAUSED: 2,\r\n  FINISHED: 3,\r\n  LOST: 4\r\n}\r\n\r\nclass Mazesteroid extends canvasGameEngine {\r\n  setup () {\r\n    // game state\r\n    this.level = 1\r\n    this.gameState = GAME_IS.UNSTARTED\r\n    this.nextGameState = this.gameState\r\n    this.newLevel()\r\n\r\n    // game events\r\n    const keyboard = new Keys(this.canvas, OPTIONS.debug)\r\n\r\n    keyboard.addKeysAction(37, () => this.ship.startTurning(-OPTIONS.shipAngleOffset), () => this.ship.stopTurning())\r\n    keyboard.addKeysAction(39, () => this.ship.startTurning(OPTIONS.shipAngleOffset), () => this.ship.stopTurning())\r\n    keyboard.addKeysAction(38, () => {\r\n      if (this.gameState === GAME_IS.RUNNING) this.ship.startBoost(OPTIONS.shipBoostPower)\r\n    }, () => this.ship.stopBoost())\r\n\r\n    if (OPTIONS.debug) {\r\n      keyboard.addKeyDownAction(82, () => this.ship.resetPos()) // r => reset ship to start of level\r\n      keyboard.addKeyDownAction(65, () => { this.ship.angle += Math.PI / 4 }) // a => turn ship 45deg\r\n      keyboard.addKeyDownAction(66, () => { this.ship.vel = new Vector() }) // b => block ship position\r\n    }\r\n\r\n    keyboard.addKeyDownAction(32, () => { // space\r\n      // some logic\r\n      switch (this.gameState) {\r\n        case GAME_IS.UNSTARTED:\r\n          this.nextGameState = GAME_IS.RUNNING\r\n          break\r\n        case GAME_IS.RUNNING:\r\n          this.nextGameState = GAME_IS.PAUSED\r\n          break\r\n        case GAME_IS.PAUSED:\r\n          this.nextGameState = GAME_IS.RUNNING\r\n          break\r\n        case GAME_IS.FINISHED:\r\n        case GAME_IS.LOST:\r\n          this.nextGameState = GAME_IS.RUNNING\r\n          this.level = 1\r\n          this.newLevel()\r\n          break\r\n      }\r\n    })\r\n    keyboard.addMouseDownAction((e) => this.ship.resetPos(e.offsetX, e.offsetY))\r\n  }\r\n\r\n  newLevel () {\r\n    // maze grid size calculation\r\n    const cols = this.level + 2\r\n    const cellW = this.w / cols\r\n    let cellH = cellW\r\n    const rows = Math.ceil(this.h / cellH)\r\n    cellH = this.h / rows\r\n\r\n    // create maze\r\n    this.maze = new Maze(cols, rows, cellW, cellH)\r\n\r\n    // create portal\r\n    const portalX = this.maze.furthestCellCoords.i * cellW + cellW / 2\r\n    const portalY = this.maze.furthestCellCoords.j * cellH + cellH / 2\r\n    const minCellDim = Math.min(cellW, cellH)\r\n\r\n    const isLastLevel = OPTIONS.lastLevel === this.level // draw a red portal\r\n    this.portal = new Portal(portalX, portalY, minCellDim / 2.5, isLastLevel)\r\n\r\n    // create ship & ship frontlight\r\n    this.shipFrontLight = new ShipFrontLight(this.w, this.h)\r\n    this.ship = new Ship(cellW / 2, cellH / 2, 10) // always starts at top left\r\n  }\r\n\r\n  _writeText (text) {\r\n    this.ctx.fillStyle = '#FFF'\r\n    this.ctx.fillRect(0, this.h / 2 - 15, this.w, 30)\r\n    this.ctx.fillStyle = '#000'\r\n    this.ctx.font = '18px sans-serif'\r\n    this.ctx.textAlign = 'center'\r\n    this.ctx.textBaseline = 'middle'\r\n    this.ctx.fillText(text, this.w / 2, this.h / 2)\r\n  }\r\n\r\n  loop (elapsedTime) {\r\n    this.ctx.fillStyle = '#111'\r\n    this.ctx.fillRect(0, 0, this.w, this.h)\r\n\r\n    this.maze.draw(this.ctx)\r\n    this.portal.draw(this.ctx)\r\n    this.ship.draw(this.ctx, this.shipFrontLight) // the ship is responsible for drawing his frontlight\r\n\r\n    const text = `Level: ${this.level}`\r\n    this.ctx.font = '12px sans-serif'\r\n    this.ctx.fillStyle = '#FFF'\r\n    this.ctx.textAlign = 'left'\r\n    this.ctx.fillText(text, 15, 15)\r\n\r\n    switch (this.gameState) {\r\n      case GAME_IS.RUNNING: {\r\n        this.ship.update(elapsedTime)\r\n        this.shipFrontLight.update(this.ship, this.maze)\r\n\r\n        const collisionWithWall = OPTIONS.wallCollision ? this.maze.collides(this.ship) : this.ship.edges(this.w, this.h)\r\n        const arrived = OPTIONS.portalCollision ? this.portal.collides(this.ship) : false\r\n\r\n        // collision with walls\r\n        if (collisionWithWall) {\r\n          this.ship.explode(() => {\r\n            this.ship.resetPos()\r\n          })\r\n        }\r\n\r\n        if (arrived) {\r\n          this.ship.enterPortal(this.portal, () => {\r\n            if (this.level + 1 > OPTIONS.lastLevel) {\r\n              this.nextGameState = GAME_IS.FINISHED\r\n            } else {\r\n              this.nextGameState = GAME_IS.UNSTARTED\r\n              this.level += 1\r\n              this.newLevel()\r\n            }\r\n          })\r\n        }\r\n        break\r\n      }\r\n      case GAME_IS.UNSTARTED:\r\n        this._writeText(`Appuyer sur \"espace\" pour commencer`)\r\n        break\r\n      case GAME_IS.PAUSED:\r\n        this._writeText(`Appuyer sur \"espace\" pour reprendre`)\r\n        break\r\n      case GAME_IS.FINISHED:\r\n        this._writeText(`Gagné ! Appuyer sur \"espace\" pour recommencer`)\r\n        break\r\n      case GAME_IS.LOST:\r\n        this._writeText(`Perdu ! Appuyer sur \"espace\" pour recommencer`)\r\n        break\r\n    }\r\n\r\n    this.gameState = this.nextGameState\r\n  } // loop\r\n}\r\n\r\n// make the game and start it\r\nnew Mazesteroid('canvas', 'Space Maze', 600, 300).start()\r\n"],"sourceRoot":""}